/*! Tab Override v2.0 | https://github.com/wjbryant/tab-override
Copyright (c) 2012 Bill Bryant | http://opensource.org/licenses/mit */
var TABOVERRIDE;typeof TABOVERRIDE!="object"&&(TABOVERRIDE={}),function(e){"use strict";var t="	",n=!1,r=!1,i=document.createElement("textarea"),s,o;e.overrideKeyDown=function(e){e=e||event;var i=e.keyCode,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N="character";if(i!==9&&(i!==13||!n)||e.ctrlKey||e.altKey)return;r=!1,f=this.value,d=this.scrollTop;if(document.selection)l=document.selection.createRange(),g=l.text,c=l.duplicate(),c.moveToElementText(this),c.setEndPoint("EndToEnd",l),m=c.text.length,v=m-g.length,o>1?(h=f.slice(0,v).split(s).length-1,p=g.split(s).length-1):h=p=0;else{if(typeof this.selectionStart!="number")return;v=this.selectionStart,m=this.selectionEnd,g=f.slice(v,m)}if(i===9)u=t,a=u.length,w=0,E=0,S=0,v!==m&&g.indexOf("\n")!==-1?(v===0||f.charAt(v-1)==="\n"?y=v:y=f.lastIndexOf("\n",v-1)+1,m===f.length||f.charAt(m)==="\n"?b=m:(b=f.indexOf("\n",m),b===-1&&(b=f.length)),e.shiftKey?(f.slice(y).indexOf(u)===0&&(y===v?g=g.slice(a):S=a,E=a),this.value=f.slice(0,y)+f.slice(y+S,v)+g.replace(new RegExp("\n"+u,"g"),function(){return w+=1,"\n"})+f.slice(m),l?(l.collapse(),l.moveEnd(N,m-E-w*a-p-h),l.moveStart(N,v-S-h),l.select()):(this.selectionStart=v-S,this.selectionEnd=m-E-w*a)):(w=1,this.value=f.slice(0,y)+u+f.slice(y,v)+g.replace(/\n/g,function(){return w+=1,"\n"+u})+f.slice(m),l?(l.collapse(),l.moveEnd(N,m+w*a-p-h),l.moveStart(N,v+a-h),l.select()):(this.selectionStart=v+a,this.selectionEnd=m+w*a,this.scrollTop=d))):e.shiftKey?f.slice(v-a).indexOf(u)===0&&(this.value=f.slice(0,v-a)+f.slice(v),l?(l.move(N,v-a-h),l.select()):(this.selectionEnd=this.selectionStart=v-a,this.scrollTop=d)):l?(l.text=u,l.select()):(this.value=f.slice(0,v)+u+f.slice(m),this.selectionEnd=this.selectionStart=v+a,this.scrollTop=d);else if(n){if(v===0||f.charAt(v-1)==="\n"){r=!0;return}y=f.lastIndexOf("\n",v-1)+1,b=f.indexOf("\n",v),b===-1&&(b=f.length),x=f.slice(y,b).match(/^[ \t]*/)[0],T=x.length;if(v<y+T){r=!0;return}l?(l.text="\n"+x,l.select()):(this.value=f.slice(0,v)+"\n"+x+f.slice(m),this.selectionEnd=this.selectionStart=v+o+T,this.scrollTop=d)}if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()},e.overrideKeyPress=function(e){e=e||event;var t=e.keyCode;if((t===9||t===13&&n&&!r)&&!e.ctrlKey&&!e.altKey){if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}},e.tabSize=function(e){var n;if(arguments.length){if(!e)t="	";else if(typeof e=="number"&&e>0){t="";for(n=0;n<e;n+=1)t+=" "}return this}return t==="	"?0:t.length},e.autoIndent=function(e){return arguments.length?(n=e?!0:!1,this):n},i.value="\n",s=i.value,o=s.length,i=null}(TABOVERRIDE);